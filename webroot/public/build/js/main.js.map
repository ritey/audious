{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AppView = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SongCollection = require('./collections/SongCollection');\n\nvar _SongView = require('./views/SongView');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Backbone = Backbone;\nvar Model = _Backbone.Model;\nvar View = _Backbone.View;\nvar Collection = _Backbone.Collection;\nvar Router = _Backbone.Router;\nvar LocalStorage = _Backbone.LocalStorage;\n\n// Global Songs collection variable.\n\nvar Songs = new _SongCollection.SongList();\n\nvar AppView = exports.AppView = function (_View) {\n  _inherits(AppView, _View);\n\n  function AppView() {\n    _classCallCheck(this, AppView);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AppView).call(this));\n\n    _this.$el = $('#app');\n    _this.soundcloudReady = false;\n\n    // Authorise Soundcloud SDK.\n    _this.authorise();\n\n    // Event when all songs are added. Runs on startup.\n    _this.listenTo(Songs, 'reset', _this.addAll);\n    _this.listenTo(Songs, 'play', _this.play);\n\n    // Populate Songs collection with static data provided by server in data var.\n    Songs.reset(data, { parse: true });\n    return _this;\n  }\n\n  /**\n   * Render App.\n   */\n\n\n  _createClass(AppView, [{\n    key: 'render',\n    value: function render() {\n      if (Songs.length) {}\n    }\n\n    /**\n     * Display all songs.\n     */\n\n  }, {\n    key: 'addAll',\n    value: function addAll() {\n      this.$('#playlist').html('');\n      // Iterate through songs and add each to html.\n      Songs.each(this.addOne, this);\n    }\n\n    /**\n     * Display one song.\n     */\n\n  }, {\n    key: 'addOne',\n    value: function addOne(model) {\n      var view = new _SongView.SongView({ model: model });\n      // Append list with rendered Song partial view.\n      $('#playlist').append(view.render().el);\n    }\n\n    /**\n     * Authorize Soundcloud SDK\n     */\n\n  }, {\n    key: 'authorise',\n    value: function authorise() {\n      SC.initialize({\n        client_id: document.querySelector(\"meta[name='client_id']\").getAttribute('content'),\n        redirect_uri: document.querySelector(\"meta[name='redirect_uri']\").getAttribute('content')\n      });\n\n      this.soundcloudReady = true;\n    }\n\n    /**\n     * Play song.\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      if (this.soundcloudReady) {}\n    }\n  }]);\n\n  return AppView;\n}(View);\n\n},{\"./collections/SongCollection\":2,\"./views/SongView\":6}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SongList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Song = require('../models/Song');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Backbone = Backbone;\nvar Collection = _Backbone.Collection;\nvar LocalStorage = _Backbone.LocalStorage;\n\n/**\n * Song Collection\n */\n\nvar SongList = exports.SongList = function (_Collection) {\n  _inherits(SongList, _Collection);\n\n  function SongList(options) {\n    _classCallCheck(this, SongList);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SongList).call(this, options));\n\n    _this.model = _Song.Song;\n\n    _this.localStorage = new LocalStorage('SongCollection-backbone');\n    return _this;\n  }\n\n  /**\n   * Populate Collection with static data.\n   * At this stage we receive whole data object with all songs.\n   * Lets return Soundcloud favorites list to model level for time being.\n   * In model level it will iterate through individual items.\n   * Figure how to load only needed stuff in the feature.\n   */\n\n\n  _createClass(SongList, [{\n    key: 'parse',\n    value: function parse(response) {\n      return response.music.soundcloud.favorites;\n    }\n  }]);\n\n  return SongList;\n}(Collection);\n\n},{\"../models/Song\":4}],3:[function(require,module,exports){\n'use strict';\n\nvar _app = require('./app');\n\n/**\n * Document ready event\n */\n$(function () {\n  new _app.AppView();\n}); /**\n     * ES6\n     * ref:\n     * http://tastejs.com/todomvc-backbone-es6/\n     * https://github.com/tastejs/todomvc-backbone-es6/blob/gh-pages/js/app.js\n     * https://github.com/tastejs/todomvc-backbone-es6/blob/gh-pages/js/todo-app.js\n     * Browserify: https://github.com/substack/node-browserify#usage\n     * Image lazyload:\n     * http://luis-almeida.github.io/unveil/\n     * http://stackoverflow.com/questions/18366550/using-lazy-loading-with-backbone\n     *\n     * Backbone tutorial:\n     * https://github.com/amejiarosario/Backbone-tutorial/blob/master/backbone-tutorial.html\n     * http://adrianmejia.com/blog/2012/09/11/backbone-dot-js-for-absolute-beginners-getting-started/\n     *\n     * Soundcloud JS SDK\n     * https://developers.soundcloud.com/docs/api/sdks\n     *\n     * Handy!!\n     * http://simblestudios.com/blog/development/wmtafo-backbone-part1.html\n     *\n     * Backbone.js Patterns:\n     * http://ricostacruz.com/backbone-patterns/index.html\n     */\n\n},{\"./app\":1}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Backbone = Backbone;\nvar Model = _Backbone.Model;\n/**\n * Song model.\n */\n\nvar Song = exports.Song = function (_Model) {\n  _inherits(Song, _Model);\n\n  function Song() {\n    _classCallCheck(this, Song);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Song).apply(this, arguments));\n  }\n\n  _createClass(Song, [{\n    key: 'defaults',\n\n    /**\n     * Default Song model params.\n     */\n    value: function defaults() {\n      return {\n        title: '',\n        duration: 0,\n        active: false\n      };\n    }\n\n    /**\n     * Parse Song details.\n     * At this stage Backbone iterates through individual SongCollection items.\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(response) {\n      /**\n       * Convenient underscore.js method to extract needed data subset from larger one.\n       */\n      return _.pick(response, 'title', 'duration');\n    }\n\n    /**\n     * Toggle active state.\n     */\n\n  }, {\n    key: 'toggle',\n    value: function toggle() {\n      this.save({\n        active: !this.get('active')\n      });\n    }\n  }]);\n\n  return Song;\n}(Model);\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Songs list item template.\n */\nvar SONG_LI_TPL = exports.SONG_LI_TPL = _.template(\"<span class='title'><%= title %></span>\" + \"<button class='play'>Play</button>\");\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SongView = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _song_li = require('../templates/song_li.tpl');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _Backbone = Backbone;\nvar View = _Backbone.View;\n\nvar SongView = exports.SongView = function (_View) {\n  _inherits(SongView, _View);\n\n  function SongView(options) {\n    _classCallCheck(this, SongView);\n\n    // Parent element doesn't have defined tagName,\n    // Therefore append options object with it\n    // because this.tagName will not work in this context.\n    options.tagName = 'li';\n    // Add class to li element.\n    options.className = 'playlist-song';\n\n    // Attach events.\n    options.events = {\n      \"click button.play\": \"play\"\n    };\n\n    // Cache the template function for a single item.\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SongView).call(this, options));\n\n    _this.template = _song_li.SONG_LI_TPL;\n    return _this;\n  }\n\n  _createClass(SongView, [{\n    key: 'render',\n    value: function render() {\n      // Pass model data to template and then append to DOM.\n      this.$el.html(this.template(this.model.toJSON()));\n\n      this.$el.toggleClass('active', this.model.get('active'));\n      console.log(this);\n      return this;\n    }\n\n    /**\n     * Play button event callback.\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      this.model.toggle();\n    }\n  }]);\n\n  return SongView;\n}(View);\n\n},{\"../templates/song_li.tpl\":5}]},{},[3]);\n"],"file":"main.js","sourceRoot":"/source/"}